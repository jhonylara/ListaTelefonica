<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">	
<ui:component xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:jsf="http://xmlns.jcp.org/jsf" >
	
	<ui:composition template="/pages/templates/layout.xhtml">
		<ui:param name="activeSubmenu" value="meudado"/>
    	<ui:param name="activeMenu" value="cadastrosBasicos"/>
    	
		<f:metadata>
        	<f:viewAction action="#{manterUsuarioBB.prepararAlteracaoMeusDados(param.idUsuario)}" />
    	</f:metadata>
    	    	
		<ui:define name="breadcrumb">		
		   <li>		   
       			Usuários/Alterar meus dados
		   </li>          
		</ui:define>

		<ui:define name="body">
			<div class="box">
				<h:form id="usuarioMeusDadosForm" acceptcharset="ISO-8859-1 UTF-8">					
					<div class="box-header with-border">
						<div class="col-xs-6 col-sm-3">
							<h3 class="box-title">
								 Alterar meus dados
							</h3>
						</div>	
						<div class="box-tools pull-right">
							<span class="observacao">(*) Campo obrigatório</span>
						</div>
					</div>

					<div class="form-group col-md-12">
						<p:inputText type="hidden" id="id" value="#{manterUsuarioBB.id}" />
					</div>

					<!-- Campo: nome -->
					<div class="form-group col-md-6">
						<p:outputLabel for="nome" value="Nome" indicateRequired="true" />

						<p:inputText 
							value="#{manterUsuarioBB.nome}"
							id="nome" 
							required="true" 
							maxlength="150"
							styleClass="form-control" 
						/>							
					</div>
					
					<!-- Campo: login -->
					<div class="form-group col-md-6">
						<p:outputLabel for="login" value="Login" indicateRequired="true" />

						<p:inputText 
							value="#{manterUsuarioBB.login}"
							id="login" 
							required="true" 
							maxlength="15"
							styleClass="form-control" 
						>
							<f:validateLength minimum="3" maximum="8" />
						</p:inputText>							
					</div>
					
					<!-- Campo: senha -->
					<div class="form-group col-md-6"> 
						<p:outputLabel for="senha" value="Senha" indicateRequired="true" />

						<p:password 
							value="#{manterUsuarioBB.senha}"
							id="senha" 
							required="true"
							maxlength="10"
							styleClass="form-control" 
						/>							
					</div>
					
					<!-- Campo: confirmação senha -->
					<div 
						class="form-group col-md-6">
						
						<p:outputLabel for="confirmacaoSenha" value="Senha (confirmação)" indicateRequired="true" />

						<p:password 
							value="#{manterUsuarioBB.senhaConfirmacao}"
							id="confirmacaoSenha" 
							required="true" 
							maxlength="10"
							styleClass="form-control" 
						/>							
					</div>
					
					<!-- Campo: será um adm (ou não) -->
					<div class="form-group col-md-12" jsf:rendered="#{autenticadorBB.ehAdministradorUsuarioLogado}">
						  <p:outputLabel for="ehAdm" value="Administrador" />
		      			  <p:selectBooleanCheckbox id="ehAdm" value="#{manterUsuarioBB.ehAdministrador}" />
					</div>					
										
					<!-- Botão de ação -->
					<div 
						class="box-footer align-center with-border" 
						jsf:rendered="#{autenticadorBB.idInformadoEhUsuarioLogado(manterUsuarioBB.id)}">
											
						<p:commandButton 
							value="Alterar" 
							title="Salvar Meus (novos) Dados"
							action="#{manterUsuarioBB.salvarMeusDados()}" 
							styleClass="btn btn-primary" 
						/>
					</div>				
				</h:form>
			</div>
		</ui:define>
	</ui:composition>
</ui:component>